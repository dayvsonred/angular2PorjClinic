<!-- <p>  credito works! </p> -->
<section>
    <div class="container-fluid">
        <div class="row tt-pg-corp">
            <div class="col tt-pg-name">
                Credito Bonus Extrato - {{SelectClinicaDados.nm_unidade_atendimento}}
            </div>
        </div>



        <div class="row finc-top-bord">
            <div class="col">
                <div class="row">
                    <div class="col finc-bt-top ">
                        <a href="{{SelectClinicaDados.BaseIndex}}">
                            <i class="fa fa-reply finc-i-col-b" aria-hidden="true"></i>
                            <strong> Voltar </strong>
                        </a>
                    </div>
                    <!-- <div class="col finc-bd-l finc-bt-top" (click)="NovoDebito(templateModalID4)" >
                        <i class="fa fa-minus finc-i-col-b" aria-hidden="true"></i> <strong> Débito </strong>
                    </div> -->
                    <div class="col finc-bd-l finc-bt-top" (click)="NovoCredito(templateModalID3)">
                        <i class="fa fa-plus finc-i-col-b" aria-hidden="true"></i>
                        <strong> Crédito </strong>
                    </div>
                    <div class="col finc-bd-l finc-bt-top" (click)="Alterar(templateModalID5)">
                        <i class="fa fa-pencil-square-o finc-i-col-b" aria-hidden="true"></i>
                        <strong> Altera </strong>
                    </div>
                    <div class="col finc-bd-l finc-bt-top" (click)="Devolucao(templateModalID7)">
                        <i class="fa fa-share-square finc-i-col-b" aria-hidden="true"></i>
                        <strong> Devolução </strong>
                    </div>
                    <div class="col-2 finc-bd-l finc-bt-top" (click)="Transfere(templateModalID8)">
                        <i class="fa fa-exchange finc-i-col-b" aria-hidden="true"></i>
                        <strong> Transferência </strong>
                    </div>
                    <div class="col finc-bd-l finc-bt-top" (click)="Deletar(templateModalID6)">
                        <i class="fa fa-times finc-i-col-b" aria-hidden="true"></i>
                        <strong> Elimina </strong>
                    </div>
                    <div class="col finc-bd-l finc-bt-top" (click)="print()">
                        <i class="fa fa-file-pdf-o finc-i-col-b" aria-hidden="true"></i>
                        <strong> Imprimir </strong>
                    </div>
                    
                </div>
            </div>
            <div class="col-3 finc-bd-l">
                <div class="row">
                    <!-- <div class="col-5 finc-bt-top"  (click)="ShowContsEssenciais(template2ModalID)"  >
                        <i class="fa fa-calendar finc-i-col-b" aria-hidden="true"></i> <strong>  Contas Essenciais </strong> ({{NumContasEssenciais}})
                    </div> -->
                    <div *ngIf="IsAdm == true"    class="col finc-bd-l finc-bt-top " (click)="RecalcularSaldoDispMd(templateModalID9)">
                            <i class="fa fa-cogs finc-i-col-b" aria-hidden="true"></i>
                            <strong class="clr-red"> Recalcular 'Saldo Disponível' </strong> 
                    </div>
                </div>
            </div>
        </div>
        <!-- end row -->



        <div class="row finc-sub-bts">

            <div class="col-3">
                <div class="form-group frm-topo ">
                    <label class="lb-topo"> Paciente </label>
                    <input type="text" class="form-control finc-inpt" placeholder="" disabled="true" [(ngModel)]="ObjSelec.PacienteSelecNome">
                </div>
            </div>

            <div class="col-2">
                <div class="form-group frm-bt-unic">
                    <button type="submit" class="btn btn-primary" (click)="SelectPaciente(templateModalID1)">
                        <i class="fa fa-search" aria-hidden="true"></i> Buscar Paciente </button>
                </div>
            </div>



            <div class="col-3">
                <div class="row">
                    <div class="col">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo">Início </label>
                            <form #myForm="ngForm" novalidate>
                                <!-- placeholder="{{DataHojeini}}" -->
                                <my-date-picker name="mydate" [locale]="locale" [brmasker]="{mask:'00/00/0000', len:10}" [options]="myDatePickerOptions" [(ngModel)]="model"
                                    required></my-date-picker>
                            </form>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo">Fim</label>
                            <form #myForm="ngForm" novalidate>
                                <!-- placeholder="{{DataHojeFim}}" -->
                                <my-date-picker name="mydate1" [locale]="locale" [brmasker]="{mask:'00/00/0000', len:10}" [options]="myDatePickerOptions" [(ngModel)]="model1"
                                    required></my-date-picker>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-1">
                <div class="form-group frm-bt-unic">
                    <button type="submit" class="btn btn-primary col-12 ft-12" [disabled]="Process" (click)="GetFinac()">
                        <i class="fa fa-refresh " aria-hidden="true"></i> Atualizar </button>
                </div>
            </div>

            <div class="col-3">
                <div class="form-group frm-topo ">
                    <label class="lb-topo"> Unidade </label>
                    <!-- <select class="form-control finc-inpt" id="exampleSelect1"  [(ngModel)]="uni"  >
                            <option *ngFor="let u of ListUnidade" [value]="u.value"   >{{u.label}}</option>
                        </select> -->
                    <ng-select style="background-color: #fff;" [options]="ListUnidade" [multiple]="multiple0" placeholder="{{UnidadeNome}}" [allowClear]="true"
                        (selected)="onSelectUnidade($event)">
                    </ng-select>
                </div>
            </div>
            
        </div>
        <!-- end row -->


        <div class="row">
            <!-- <div class="container-fluid finc-lista-relatorio"  > -->
            <div class="col finc-lista-relatorio" #FincGridRelatorio>

                    <div class="finc-ccc-processando" *ngIf="caregandoFinc"   >
                            <div class="processando">
                                <i class="fa fa-refresh  fa-spin fa-3x fa-fw processando-i"></i>
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
              

                <div class="finc-bd-tb">
                    <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                        <thead class="thead-default">
                            <tr>
                                <th width="5%" style="text-align: center;">#</th>
                                <th width="10%" style="text-align: center;" title="Data Tranferencia"  >Data</th>
                                <th width="" style="text-align: center;">Descrição</th>
                                <th width="15%" style="text-align: center;">Forma Pagamento</th>
                                <th width="10%" style="text-align: center;">Detalhes Parcelas</th>
                                <th width="7%" style="text-align: center;">Valor</th>
                                <!-- <th width ="" style="text-align: center;"  >Depósito/Bonus</th> -->
                                <!-- <th width ="" style="text-align: center;"  >Saque/Debito</th> -->
                                <th width="9%" style="text-align: center;">Saldo</th>
                                <th width="10%" style="text-align: center;">Usuario</th>

                                <th width="1%"></th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="finc-bd-tb finc-table-responsive">
                    <table class="table table-striped table-hover-fic finc-table" id="finc-tb">
                        <tbody class="ft-12">
                            <ng-template ngFor let-ListFinancGridU [ngForOf]="ListFinancGrid" let-i="index">
                                <!--    <tr   [class.table-hover-fic-Selected]="i == FincTrselectedRow"  [class.finc-td-debito]="ListFinancClinica.tipo_movimento == 'D'"   *ngFor="let ListFinancClinica of ListFinancClinicaGrid; let i = index " > -->
                                <tr (click)="FincaTrSelect(ListFinancGridU,i)" [class.table-hover-fic-Selected]="i == FincTrselectedRow" [class.finc-td-debito]="ListFinancGridU.transacao == 'D'">
                                    <th width="5%" scope="row" style="text-align: center;">{{i+1}}</th>
                                    <td width=""> {{ListFinancGridU.dt_transacao }} </td>
                                    <td width=""   >    {{ListFinancGridU.MSG }} <strong> {{pacienteNomes[ListFinancGridU.cd_paciente_transfere]}} </strong>  </td>
                                    <!-- <td width =""  > {{ListFinancGridU.nm_tipo_tratamento }} </td>   -->
                                    <td width=""> {{ListFinancGridU.nm_tipo_pagamento }} </td>
                                    <td width="5%" style="text-align: right;" (click)="detalhesFinac(templateModalID2,ListFinancGridU)">
                                        <i class="fa fa-search-plus"> </i>
                                    </td>
                                    <td width="10%" [class.table-Debito-td]="ListFinancGridU.transacao == 'D'" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                                    {{ListFinancGridU.valor_bonus | formatCurrency}} {{ListFinancGridU.transacao}} </td>
                                    <!-- <td width =""  > </td> -->
                                    <td width="10%" style="text-align: center;" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{ListFinancGridU.valor_total | formatCurrency}} </td>
                                    <td width="10%" class="ft-10" > <strong > {{ListFinancGridU.nm_prestador}} </strong>  </td>
                                    <td width="1%"></td>
                                </tr>
                            </ng-template>
                        </tbody>
                    </table>
                </div>

                <div class="col-12 ">
                    <div class="row totais-rodape">
                        <!-- {{TotalSaldo  | formatCurrency }} -->
                        <div class="col-6">
                            <span>
                                <strong>TOTAL</strong>
                            </span>
                        </div>
                        <div class="col-3">
                            <!-- <span><strong> Valor : </strong>  {{TotalTranzacao  | formatCurrency }}  </span>  -->
                            <span><strong>Saldo relativo período : </strong> {{TotalTranzacao | formatCurrency }} </span>
                        </div>
                        <div class="col-3">
                            
                            <span><strong>Saldo Disponível : </strong>  {{TotalSaldo  | formatCurrency }} </span>
                            <!-- <button type="submit" class="btn btn-primary" (click)="a()">
                                <i class="fa fa-cogs" aria-hidden="true"></i> Recalcular </button> -->

                                <!-- <label class="clr-red"   (click)="NovoCredito(templateModalID3)">
                                    <i class="fa fa-cogs finc-i-col-b" aria-hidden="true"></i>
                                    <strong > Recalcular </strong>
                                </label> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>





    <ng-template #templateModalID1>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Selecionando Paciente </h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <!-- This is static modal, backdrop click will not close it.
                Click <b>&times;</b> to close modal. -->
            <div>

                <div class="  finc-sub-bts">
                    <div class="form-group frm-topo ">
                        <label class="lb-topo">Digite para busacar o Paciente. </label>
                        <input type="text" class="form-control finc-inpt" #nomePacBusc placeholder="Pesquisar" (keyup)="GetPacienteString($event)">
                    </div>
                </div>


                <div class="finc-bd-tb">
                    <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                        <thead class="thead-default">
                            <tr>
                                <th width="5%" style="text-align: center;">#</th>
                                <th width="35%" style="text-align: center;">nome</th>
                                <th width="20%" style="text-align: center;">CPF</th>
                                <th width="40%" style="text-align: center;">Unidade</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="finc-bd-tb finc-table-responsive">
                    <table class="table table-striped table-hover-fic finc-table" id="finc-tb">
                        <tbody class="ft-12">
                            <ng-template ngFor let-ListPaciente [ngForOf]="ListPacientes" let-i="index">
                                <!--    <tr  (click)="FincaTrSelect(ListFinancClinica,i)" [class.table-hover-fic-Selected]="i == FincTrselectedRow"  [class.finc-td-debito]="ListFinancClinica.tipo_movimento == 'D'"   *ngFor="let ListFinancClinica of ListFinancClinicaGrid; let i = index " > -->
                                <tr (click)="PacienteTrSelect(ListPaciente)">
                                    <th width="5%" scope="row" style="text-align: center;">{{i+1}}</th>
                                    <td width="40%"> {{ListPaciente.nome}} </td>
                                    <td width="20%"> {{ListPaciente.cpf}} </td>
                                    <td width="35%"> {{ListPaciente.nm_unidade_atendimento}} </td>
                                </tr>
                            </ng-template>
                        </tbody>
                    </table>
                </div>



                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-6">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Cancelar </button>
                        <!-- <button type="button" class="btn btn-danger" [disabled]="DellProcess" (click)="ConfirmarDellCred(template4ModalID,true)" >Excluir</button>  -->
                    </div>
                </div>
            </div>
        </div>
    </ng-template>

    <!-- * MODAL DETALHES DO FINANCEIRO      -->

    <ng-template #templateModalID2>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name"> Detalhes da parcela </h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="modal-body">
                <!-- This is static modal, backdrop click will not close it.
                Click <b>&times;</b> to close modal. -->
                <div  *ngIf="caregandoDthlFCP == true"  >









                    <div class="  finc-sub-bts" *ngIf="FinancDTHLFCP != null">
                        <div class="form-group frm-topo  mgb-0 ">
                            <label class="lb-topo">
                                <strong>Financeiro Paciente</strong>
                            </label>
                        </div>
                    </div>

                    <div class="row finc-sub-bts" *ngIf="FinancDTHLFCP != null">
                        <div class="finc-bd-tb w-100">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <th width="5%" style="text-align: center;">Parcela</th>
                                        <th width="10%" style="text-align: center;" title="Data Baixa - quando entra no caixa"  >Data</th>
                                        <th width="10%" style="text-align: center;">Valor Crédito</th>
                                        <th width="10%" style="text-align: center;">Valor Real</th>
                                        <th width="13%" style="text-align: center;">Tratamento</th>
                                        <th width="17%" style="text-align: center;">Froma Pagamento</th>
                                        <th width="" style="text-align: center;">Descrição</th>
                                    </tr>
                                </thead>
                            <!-- </table>
                        </div>
                        <div class="finc-bd-tb w-100">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb"> -->
                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHLFCP [ngForOf]="FinancDTHLFCP" let-i="index">
                                        <tr>
                                            <th width="5%" scope="row" style="text-align: center;">{{i+1}}</th>
                                            <td width="10%"> {{DTHLFCP.data }} </td>
                                            <td width="10%" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.valor_credito | formatCurrency }} </td>
                                            <td width="10%" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.ValorLiquido | formatCurrency}} </td>
                                            <td width="13%" style="text-align: center;"> {{DTHLFCP.nm_tipo_tratamento}} </td>
                                            <td width="17%" style="text-align: center;"  [class.showNumCart]="DTHLFCP.numerocartao != '' "    > {{DTHLFCP.nm_tipo_pagamento}}  <label > {{DTHLFCP.numerocartao}} </label>    </td>
                                            <td width=""> {{DTHLFCP.historico}} </td>
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>



                    <div class="  finc-sub-bts mgt-5" *ngIf="FinancDTHLFGU != null">
                        <div class="form-group frm-topo  mgb-0 ">
                            <label class="lb-topo">
                                <strong>Financeiro Usou </strong>
                            </label>
                        </div>
                    </div>

                    <div class="row finc-sub-bts " *ngIf="FinancDTHLFGU != null">
                        <div class="finc-bd-tb w-100 ">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <th width="" style="text-align: center;">Paciente</th>
                                        <th width="" style="text-align: center;">Nome tratamento</th>
                                        <th width="" style="text-align: center;">Valor total</th>
                                        <th width="" style="text-align: center;">Desconto</th>
                                        <th width="" style="text-align: center;">juros</th>
                                        <th width="" style="text-align: center;">Valor Corrigido</th>
                                        <!-- <th width =""   style="text-align: center;"  >Data cadastro</th> -->
                                        <th width="" style="text-align: center;">Unidade</th>
                                    </tr>
                                </thead>
                                <!-- </table>
                            </div>
                            <div class="finc-bd-tb w-100">  
                                <table class="table table-striped table-hover-fic finc-table" id="finc-tb"> -->
                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHLFCP [ngForOf]="FinancDTHLFGU" let-i="index">
                                        <tr>
                                            <th width="" style="text-align: center; " > {{DTHLFCP.nome}}</th>
                                            <td width="" style="text-align: center; "  > {{DTHLFCP.nm_tipo_tratamento }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.valor_total | formatCurrency }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.desconto | formatCurrency }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.juros | formatCurrency }} </td>
                                            <td width="" style="text-align: center;" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.valor_corrigido | formatCurrency }} </td>
                                            <!-- <td width =""  style="text-align: center;" > {{DTHLFCP.dt_cadastro_financeiro}} </td> -->
                                            <td width="" style="text-align: center;"> {{DTHLFCP.nm_unidade_atendimento}} </td>
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>






                    <div class="  finc-sub-bts mgt-5" *ngIf="FinancDTHLFGG != null || FinancDTHLTRTU != null ">
                        <div class="form-group frm-topo mgb-0  ">
                            <!-- Financeiro Gerado -->
                            <label class="lb-topo">
                                <strong> Tratamento aprovado </strong>
                            </label>
                        </div>
                    </div>

                    <div class="row finc-sub-bts " *ngIf="FinancDTHLFGG != null">
                        <div class="finc-bd-tb w-100 ">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <th width="" style="text-align: center;">Paciente</th>
                                        <th width="" style="text-align: center;">Tratamento</th>
                                        <th width="" style="text-align: center;">Forma Pagamento</th>
                                        <th width="" style="text-align: center;">Valor total</th>
                                        <th width="" style="text-align: center;">Desconto</th>
                                        <th width="" style="text-align: center;">juros</th>
                                        <th width="" style="text-align: center;">Valor Corrigido</th>
                                        <!-- <th width =""       style="text-align: center;"  >Data cadastro</th> -->
                                        <th width="" style="text-align: center;">Unidade</th>
                                    </tr>
                                </thead>
                                <!-- </table>
                            </div>
                            <div class="finc-bd-tb w-100">  
                                <table class="table table-striped table-hover-fic finc-table" id="finc-tb"> -->
                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHLFCP [ngForOf]="FinancDTHLFGG" let-i="index">
                                        <tr>
                                            <th width="" style="text-align: center;" >{{DTHLFCP.nome}}</th>
                                            <td width="" style="text-align: center;" > {{DTHLFCP.nm_tipo_tratamento }} </td>
                                            <td width="" style="text-align: center;" > {{DTHLFCP.nm_tipo_pagamento }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.valor_total | formatCurrency }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.desconto | formatCurrency }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.juros | formatCurrency }} </td>
                                            <td width="" style="text-align: center;" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHLFCP.valor_corrigido | formatCurrency }} </td>
                                            <!-- <td width ="" style="text-align: center;" > {{DTHLFCP.dt_cadastro_financeiro}} </td> -->
                                            <td width="" style="text-align: center;"> {{DTHLFCP.nm_unidade_atendimento}} </td>
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>





                    <!-- <div class="  finc-sub-bts"> 
                            <div class="form-group frm-topo ">
                                <label class="lb-topo" ><strong>Odonto Tratamento</strong></label>
                            </div>
                        </div> -->
                    <!-- <input type="text" class="form-control finc-inpt"  disabled="true"  [(ngModel)]="FinancDTHL.ob_chave"  > -->

                    <!-- <div class="  finc-sub-bts mgt-5" *ngIf="FinancDTHLTRTU != null">
                        <div class="form-group frm-topo mgb-0 ">
                            usou 
                            <label class="lb-topo">
                                <strong>Odonto tratamento </strong>
                            </label>
                        </div>
                    </div> -->

                    <div class="row finc-sub-bts" *ngIf="FinancDTHLTRTU != null">
                        <div class="finc-bd-tb w-100">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <!-- <th width="" style="text-align: center;">Paciente</th> -->
                                        <th width="" style="text-align: center;">Prestador</th>
                                        <th width="" style="text-align: center;">Inicio</th>
                                        <th width="" style="text-align: center;">Fim</th>
                                        <!-- <th width =""  style="text-align: center;"  >Sistuação</th> -->
                                        <!-- <th width =""  style="text-align: center;"  >Convenio</th> -->
                                        <!-- <th width =""  style="text-align: center;"  >Tabela</th> -->
                                    </tr>
                                </thead>
                                <!-- </table>
                            </div>
                            <div class="finc-bd-tb w-100">  
                                <table class="table table-striped table-hover-fic finc-table" id="finc-tb"> -->
                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHL [ngForOf]="FinancDTHLTRTU" let-i="index">
                                        <tr>
                                            <!-- <th width="" style="text-align: center;"> {{DTHL.nome}}</th> -->
                                            <td width="" style="text-align: center;"> {{DTHL.nm_prestador }} </td>
                                            <td width="" style="text-align: center;"> {{DTHL.dtinicio}} </td>
                                            <td width="" style="text-align: center;"> {{DTHL.dtfim}} </td>
                                            <!-- <td width ="10%"  style="text-align: center;"  > {{DTHL.situacao}} </td> -->
                                            <!-- <td width =""   > {{DTHL.cd_convenio}} </td> -->
                                            <!-- <td width =""   > {{DTHL.cd_tabela}} </td> -->
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>


                    <!-- <div class="  finc-sub-bts mgt-5" *ngIf="FinancDTHLTRTG != null">
                        <div class="form-group frm-topo mgb-0 ">
                            gerou 
                            <label class="lb-topo">
                                <strong>Odonto tratamento </strong>
                            </label>
                        </div>
                    </div> -->

                    <div class="row finc-sub-bts" *ngIf="FinancDTHLTRTG != null">
                        <div class="finc-bd-tb w-100">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <!-- <th width="" style="text-align: center;">Paciente</th> -->
                                        <th width="" style="text-align: center;">Prestador</th>
                                        <th width="" style="text-align: center;">Inicio</th>
                                        <th width="" style="text-align: center;">Fim</th>
                                        <!-- <th width =""   style="text-align: center;"  >Sistuação</th> -->
                                        <!-- <th width =""       style="text-align: center;"  >Convenio</th> -->
                                        <!-- <th width =""       style="text-align: center;"  >Tabela</th> -->
                                    </tr>
                                </thead>
                                <!-- </table>
                            </div>
                            <div class="finc-bd-tb w-100">  
                                <table class="table table-striped table-hover-fic finc-table" id="finc-tb"> -->
                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHL [ngForOf]="FinancDTHLTRTG" let-i="index">
                                        <tr>
                                            <!-- <th width="" style="text-align: center;"> {{DTHL.nome}}</th> -->
                                            <td width="" style="text-align: center;"> {{DTHL.nm_prestador }} </td>
                                            <td width="" style="text-align: center;"> {{DTHL.dtinicio}} </td>
                                            <td width="" style="text-align: center;"> {{DTHL.dtfim}} </td>
                                            <!-- <td width ="10%"   > {{DTHL.situacao}} </td> -->
                                            <!-- <td width =""   > {{DTHL.cd_convenio}} </td> -->
                                            <!-- <td width =""   > {{DTHL.cd_tabela}} </td> -->
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>











                    <!-- <div class="row finc-sub-bts" *ngIf="FinancDTHL.fpU_chave != null"> 
                            <div class="col-3">
                                <div class="form-group frm-topo ">
                                    <label class="lb-topo" > COD </label>
                                    <input type="text" class="form-control finc-inpt"  disabled="true"  [(ngModel)]="FinancDTHL.fpU_chave"   >
                                </div>
                            </div>
    
                            <div class="col-3">
                                <div class="form-group frm-topo ">
                                    <label class="lb-topo" > Num. Pacelas </label> 
                                    <input type="text" class="form-control finc-inpt"  disabled="true"  [(ngModel)]="FinancDTHL.fpU_num_parcelas"   >
                                </div>
                            </div>
    
                            <div class="col-3">
                                <div class="form-group frm-topo ">
                                    <label class="lb-topo" > Valor Corrigido </label> 
                                    <input type="text" class="form-control finc-inpt"  disabled="true"  [(ngModel)]="FinancDTHL.fpU_valor_corrigido"  >
                                </div>
                            </div>
                        </div> -->











                    <div class="row finc-sub-bts ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> </label>
                        </div>
                    </div>


                    <div class="row finc-sub-bts pa-t-15">
                        <div class="col-6">
                            <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                            <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Fechar </button>
                            <!-- <button type="button" class="btn btn-danger" [disabled]="DellProcess" (click)="ConfirmarDellCred(template4ModalID,true)" >Excluir</button>  -->
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </ng-template>


    <!-- ################################################## MODAL Crédito MODAL  -->

    <ng-template #templateModalID3>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Novo Crédito</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">

            <div>
                    <div class=" col-12 finc-sub-bts mgb-10" > <strong class="obrigat" >*</strong> Campos obrigatórios </div>

                <div class="row finc-sub-bts">

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Forma pagamento <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" [(ngModel)]="MD.TipoParcela" (change)="onchagerPagForm(MD.TipoParcela)">
                                <option *ngFor="let R of ListFormaPG" [value]="R.chave">{{R.nm_tipo_pagamento}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Tratamento <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" [(ngModel)]="MD.chaveTratamento">
                                <option *ngFor="let T of ListTratamentos" [value]="T.chave">{{T.nm_tipo_tratamento}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Valor <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" placeholder="R$: 0,00" [(ngModel)]="MD.valorNovoDeito" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                                #valadd (click)="FumMovCusorOfEnd(valadd)" (keyup)="onChageValADD()">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>
                </div>


                <div class="row finc-sub-bts ">

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Hoje </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>

                    <div class="col-2">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Parcelas <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" [(ngModel)]="MD.parces" [disabled]="MD.TipoParcela == 'L00000020110310134731' ">
                                <option *ngFor="let P of ListParcelas" [value]="P.num">{{P.num}}</option>
                            </select>
                        </div>
                    </div>


                    <!-- DADOS PARA CARTAO  -->
                        <div class="col-3" *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' " >
                            <div class="form-group frm-topo " >
                                <label class="lb-topo"> Bandeira Cartão <strong class="obrigat" >*</strong></label>
                                <!-- {{SaldoCaixaDifirenca}} -->
                                <select class="form-control finc-inpt" [(ngModel)]="MD.bandeiraCartao">
                                    <option *ngFor="let R of ListBandeiraCartao" [value]="R.cd_bandeira_cartao">{{R.nm_bandeira_cartao}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-2"  *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' ">
                            <div class="form-group frm-topo ">
                                <label class="lb-topo">N° cartão Inicio </label>
                                <input type="text" class="form-control finc-inpt" [brmasker]="{mask:'0000', len:4, person: true}" [(ngModel)]="MD.numerocartaoINI" NumberOnly  maxlength="4">
                            </div>
                        </div>

                        <div class="col-2" *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' ">
                            <div class="form-group frm-topo " >
                                <label class="lb-topo">N° cartão ultimos <strong class="obrigat" >*</strong></label>
                                <!-- {{SaldoCaixaDifirenca}} -->
                                <input type="text" class="form-control finc-inpt" [brmasker]="{mask:'0000', len:4, person: true}" [(ngModel)]="MD.numerocartao"  NumberOnly    maxlength="4">
                            </div>
                        </div>


                    <!-- DADOS PARA CHEQUE  chequebanco chequeagencia chequeconta chequenumero  -->
                        <div class="col-3"  *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' " >
                            <div class="form-group frm-topo ">
                                <label class="lb-topo"> Banco<strong class="obrigat" >*</strong>  </label>
                                <select class="form-control finc-inpt" [(ngModel)]="MD.chequebanco"  >
                                    <option *ngFor="let cheqB of ListBancoCheq" [value]="cheqB.chave">{{cheqB.nm_banco}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-2"  *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                            <div class="form-group frm-topo ">
                                <label class="lb-topo"> Agência<strong class="obrigat" >*</strong> </label>
                                <input type="text" class="form-control finc-inpt" maxLength="5" [(ngModel)]="MD.chequeagencia"  NumberOnly >
                            </div>
                        </div>
                        <div class="col-2"  *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                            <div class="form-group frm-topo ">
                                <label class="lb-topo"> Conta<strong class="obrigat" >*</strong> </label>
                                <input type="text" class="form-control finc-inpt" maxLength="10" [(ngModel)]="MD.chequeconta"  NumberOnly >
                            </div>
                        </div>
                        <div class="col"  *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                            <div class="form-group frm-topo ">
                                <label class="lb-topo"> N° Cheque<strong class="obrigat" >*</strong> </label>
                                <input type="text" class="form-control finc-inpt" maxLength="26" [(ngModel)]="MD.chequenumero" NumberOnly >
                            </div>
                        </div>
                        <!-- <div class="col">
                            <div class="form-group frm-topo ">
                                <label class="lb-topo"> Usar de cliente (terceiro): </label>
                                <div>
                                    <div>
                                        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="S" [(ngModel)]="MD.CheqTerce">
                                        <label class="lb-topo">Sim</label>
                                    </div>
                                    <div>
                                        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="N" checked [(ngModel)]="MD.CheqTerce">
                                        <label class="lb-topo">Não</label>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                </div>



                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-6">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Cancelar </button>
                        <button type="button" class="btn btn-success" [disabled]="Process" (click)="NovoCreditoExe()">Adicionar</button>

                    </div>
                </div>
            </div>
        </div>
    </ng-template>


    <!-- ########################################## MODAL DEBITO MODAL  -->
    <ng-template #templateModalID4>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Novo Debito</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">

            <div>

                <div class="row finc-sub-bts">
                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Data </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Tratamento </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" [(ngModel)]="MD.chaveTratamento">
                                <option *ngFor="let T of ListTratamentos" [value]="T.chave">{{T.nm_tipo_tratamento}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Valor </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" placeholder="R$: 0,00" [(ngModel)]="MD.valorNovoDeito" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                                #valadd2 (click)="FumMovCusorOfEnd(valadd2)" (keyup)="onChageValDebito()">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>
                </div>



                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-6">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Cancelar </button>
                        <button type="button" class="btn btn-success" [disabled]="Process" (click)="NovoDebitoExe()">Adicionar</button>

                    </div>
                </div>
            </div>
        </div>
    </ng-template>


    <!-- ################################################## ALTERAR  DEBITO Crédito  -->

    <ng-template #templateModalID5>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Alterar Crédito</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">




            <div>
                <div class=" col-12 finc-sub-bts mgb-10" > <strong class="obrigat" >*</strong> Campos obrigatórios </div>

                <div class="row finc-sub-bts">
                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Data </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>



                    <!-- </div>

                        <div class="row finc-sub-bts " >  -->
                    <!-- *ngIf="MD.chaveTratamento != null || MD.chaveTratamento == '' "  -->
                    <!-- <div class="col-3"    >
                                <div class="form-group frm-topo ">
                                    <label class="lb-topo" > Tratamento </label> 
                                    <select class="form-control finc-inpt"  [(ngModel)]="MD.chaveTratamento"   >
                                        <option *ngFor="let T of ListTratamentos"  [value]="T.chave" >{{T.nm_tipo_tratamento}}</option>
                                    </select>
                                </div>
                            </div> -->

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Forma Pagamento <strong class="obrigat" >*</strong></label>
                            <select class="form-control finc-inpt" [(ngModel)]="MD.TipoParcela" (change)="onchagerPagFormAlt(MD)">
                                <option *ngFor="let R of ListFormaPG" [value]="R.chave">{{R.nm_tipo_pagamento}}</option>
                            </select>
                        </div>
                    </div>


                    <div class="col-2">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo Selecionado </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>

                    <div class="col-2">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo">Novo Valor <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}}  #valadd3  (click)="onChageValAlterar(valadd3)" -->
                            <input type="text" class="form-control finc-inpt" placeholder="R$: 0,00" [(ngModel)]="MD.valorNovoDeito" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                                (change)="onChageAlterarPAC(MD)" (keyup)="onChageAlterarPAC(MD)">
                        </div>
                    </div>

                    <div class="col-2">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Parcela <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}}  "  -->
                            <input type="number" class="form-control finc-inpt" [(ngModel)]="MD.Pacelas" [disabled]="MD.TipoParcela == 'L00000020110310134731' "
                                (change)="onchagerAltParcela(MD)">
                        </div>
                    </div>
                </div>

                <div class="row finc-sub-bts" *ngIf="MD.TipoParcela != null ">
                    <div class="col-3" *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' ">
                        <div class="form-group frm-topo " >
                            <label class="lb-topo"> Bandeira Cartão <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" [(ngModel)]="MD.bandeiraCartao">
                                <option *ngFor="let R of ListBandeiraCartao" [value]="R.cd_bandeira_cartao">{{R.nm_bandeira_cartao}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-3" *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' " >
                        <div class="form-group frm-topo " >
                            <label class="lb-topo">N° cartão iniciais </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt " [brmasker]="{mask:'0000', len:4, person: true}" [(ngModel)]="MD.numerocartaoINI" NumberOnly
                                maxlength="4">
                        </div>
                    </div>

                    <div class="col-3"  *ngIf="MD.TipoParcela == 'L20120705222521' || MD.TipoParcela == 'L00000020100620202855' ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo">Numero cartão - 4 Ultimos <strong class="obrigat" >*</strong></label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt " [brmasker]="{mask:'0000', len:4, person: true}" [(ngModel)]="MD.numerocartao" NumberOnly
                                maxlength="4">
                        </div>
                    </div>




                    <!-- DADOS PARA CHEQUE  chequebanco chequeagencia chequeconta chequenumero  -->
                    <div class="col-3" *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Banco
                                <strong class="obrigat">*</strong>
                            </label>
                            <select class="form-control finc-inpt" [(ngModel)]="MD.chequebanco">
                                <option *ngFor="let cheqB of ListBancoCheq" [value]="cheqB.chave">{{cheqB.nm_banco}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-2" *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Agência
                                <strong class="obrigat">*</strong>
                            </label>
                            <input type="text" class="form-control finc-inpt" maxLength="5" [(ngModel)]="MD.chequeagencia" NumberOnly >
                        </div>
                    </div>
                    <div class="col-2" *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Conta
                                <strong class="obrigat">*</strong>
                            </label>
                            <input type="text" class="form-control finc-inpt" maxLength="10" [(ngModel)]="MD.chequeconta" NumberOnly >
                        </div>
                    </div>
                    <div class="col" *ngIf="MD.TipoParcela == 'L00000020100620202851' || MD.TipoParcela == 'L00000020100620202853' ">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> N° Cheque
                                <strong class="obrigat">*</strong>
                            </label>
                            <input type="text" class="form-control finc-inpt" maxLength="26" [(ngModel)]="MD.chequenumero" NumberOnly>
                        </div>
                    </div>
                    <!-- <div class="col">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Usar de cliente (terceiro): </label>
                            <div>
                                <div>
                                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="S" [(ngModel)]="MD.CheqTerce">
                                    <label class="lb-topo">Sim</label>
                                </div>
                                <div>
                                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="N" checked [(ngModel)]="MD.CheqTerce">
                                    <label class="lb-topo">Não</label>
                                </div>
                            </div>
                        </div>
                    </div> -->


                </div>

                <div class="row  ">
                    <div class=" col-12  finc-sub-bts mgt-5">
                        <div class="form-group frm-topo mgb-0 ">
                            <label class="lb-topo">
                                <strong>Financeiro Paciente Referente ao Bonus </strong>
                            </label>
                        </div>
                    </div>

                    <div class="col-12 ">
                        <div class="finc-bd-tb w-100">
                            <table class="table table-striped table-hover-fic finc-table" id="finc-tb" style="margin-bottom: 0;">
                                <thead class="thead-default">
                                    <tr>
                                        <th width="" style="text-align: center;">Parcela</th>
                                        <th width="" style="text-align: center;">Baixa</th>
                                        <th width="" style="text-align: center;">Valor Credito</th>
                                        <th width="" style="text-align: center;">Valor Bonus</th>
                                        <th width="" style="text-align: center;">Novo Valor </th>
                                        <th width="" style="text-align: center;">Baixada </th>
                                        <th width="" style="text-align: center;">Excluir </th>

                                    </tr>
                                </thead>

                                <tbody class="ft-12">
                                    <ng-template ngFor let-DTHL [ngForOf]="MD.DTHLFCP" let-i="index">
                                        <tr [class.table-hover-fic-excluir]="DTHL.corFCP == 0" [class.table-hover-fic-nova]="DTHL.corFCP == 2" [class.table-hover-fic-alterado]="DTHL.corFCP == 3">
                                            <th width="" style="text-align: center;"> {{i+1}}</th>
                                            <td width=""> {{DTHL.dt_baixa }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHL.valor_credito | formatCurrency }} </td>
                                            <td width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHL.valor_ADD_BONUS | formatCurrency }}</td>
                                            <th width="" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"> {{DTHL.NovoValorFCP | formatCurrency}} </th>
                                            <td width="" style="text-align: center;" [class.table-excluir-col-NAO]=" DTHL.alterarFCP != null" [class.table-excluir-col-SIM]=" DTHL.alterarFCP == null">
                                                <label></label>
                                            </td>
                                            <td width="" style="text-align: center;">
                                                <label> {{DTHL.parcelaFCP}} </label>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <div class="row finc-sub-bts pa-t-15 ">
                    <div class="col-12  " style="margin-top: 10px;">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->

                        <button type="button" class="btn btn-primary float-right " [disabled]="Process" (click)="AlterarExe(MD,templateModalID5)">Alterar</button>
                        <button type="button" class="btn btn-danger float-right mgr-15 " (click)="modalRef.hide()">Cancelar </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>



    <!-- ################################################## DELETAR  -->

    <ng-template #templateModalID6>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Deletar Débito/Crédito</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">

            <div>

                <div class="row finc-sub-bts">
                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Data </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo">Valor </label>
                            <!-- {{SaldoCaixaDifirenca}} #valadd3 (click)="onChageValAlterar(valadd3)" -->
                            <input type="text" class="form-control finc-inpt" disabled="true" placeholder="R$: 0,00" [(ngModel)]="MD.valorNovoDeito"
                                currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" 
                                (keyup)="onChageAlterar()">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo Alterado </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Parcela </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <select class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.TipoParcela">
                                <option *ngFor="let R of ListTipoParcela" [value]="R.value">{{R.nome}}</option>
                            </select>
                        </div>
                    </div>


                </div>


                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-12" style="margin-top: 10px;">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        
                        <button type="button" class="btn btn-primary float-right " [disabled]="Process" (click)="DeletarExe()">Deletar</button>
                        <button type="button" class="btn btn-danger float-right mgr-15 " (click)="modalRef.hide()"> Cancelar </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>



    <!-- ################################################## Devolução   -->

    <ng-template #templateModalID7>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Devolução de crédito </h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">

            <div>

                <div class="row finc-sub-bts">
                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Data </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Valor da Devolução </label>
                            <!-- {{SaldoCaixaDifirenca}} #valadd33 (click)="onChageValAlterar(valadd33)" -->
                            <input type="text" class="form-control finc-inpt"  placeholder="R$: 0,00"  [(ngModel)]="MD.valorNovoDeito"
                                currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" 
                                (keyup)="onChageAlterar2()">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Resto do Saldo Alterado </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo atual  </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valorMax" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>

                    <!-- <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Parcela  </label>
                            <select class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.TipoParcela">
                                <option *ngFor="let R of ListTipoParcela" [value]="R.value">{{R.nome}}</option>
                            </select>
                        </div>
                    </div> -->


                </div>


                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-12 " style="margin-top: 10px;" >
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        
                        <button type="button" class="btn btn-primary float-right " [disabled]="Process" (click)="DevolucaoExe(MD)">Devolver</button>
                        <button type="button" class="btn btn-danger float-right mgr-15"  (click)="modalRef.hide()"> Cancelar </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>







    <!-- ################################################## Tranferencia    -->

    <ng-template #templateModalID8>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Transferência de crédito </h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">

            <div>

                <div class="row finc-sub-bts">
                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Data </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.vencimento">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Valor a transferir </label>
                            <!-- {{SaldoCaixaDifirenca}} #valadd33 (click)="onChageValAlterar(valadd33)" -->
                            <input type="text" class="form-control finc-inpt"  placeholder="R$: 0,00"  [(ngModel)]="MD.valorNovoDeito"
                                currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" 
                                (keyup)="onChageAlterar2()">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Resto do Saldo Alterado </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valor_total" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>

                    <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Saldo atual  </label>
                            <!-- {{SaldoCaixaDifirenca}} -->
                            <input type="text" class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.valorMax" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
                        </div>
                    </div>


                    <!-- <div class="col-3">
                        <div class="form-group frm-topo ">
                            <label class="lb-topo"> Parcela  </label>
                            <select class="form-control finc-inpt" disabled="true" [(ngModel)]="MD.TipoParcela">
                                <option *ngFor="let R of ListTipoParcela" [value]="R.value">{{R.nome}}</option>
                            </select>
                        </div>
                    </div> -->


                </div>


                <!-- *ngIf=" (MD.PagForm == 'L00500020161205113918') " -->
                <div class="row finc-sub-bts "  > 
                    <div class="col bd-callout bd-callout-warning">
                      <div class="form-group frm-topo">
                          <label class="lb-topo" > Digite para busacar o Paciente que recebera o crédito: </label>
                             <ng-select (keyup)="GetPacienteStringTF($event)"
                                    [options]="ListPacientesTransf"
                                    [multiple]="multiple0"
                                    placeholder="Buscar nome de Paciente..."
                                    [allowClear]="true"
                                    (selected)="onNamePSelected($event)">
                              </ng-select>
                      </div>
                    </div>
                </div>




                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-12 " style="margin-top: 10px;" >
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
                        
                        <button type="button" class="btn btn-primary float-right " [disabled]="Process" (click)="TransfereExe(MD)">Transferir</button>
                        <button type="button" class="btn btn-danger float-right mgr-15"  (click)="modalRef.hide()"> Cancelar </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>


    <ng-template #templateModalID9>
        <div class="modal-header tt-md-corp">
            <h4 class="modal-title pull-left tt-md-name">Recalcular 'Saldo Disponível' </h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span class="tt-md-close" aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
    
            <div>
                <div class="col-12">
    
                    Recalcular 'Saldo Disponível' com base nos dados disponivels no banco?
    
                </div>
    
                <div class="row finc-sub-bts pa-t-15">
                    <div class="col-12 " style="margin-top: 10px;">
                        <!-- <button type="button" class="btn btn-primary"  >Ok</button> -->
    
                        <button type="button" class="btn btn-primary float-right " [disabled]="Process" (click)="RecalcularSaldoDisp()">Recalcular</button>
                        <button type="button" class="btn btn-danger float-right mgr-15" (click)="modalRef.hide()"> Cancelar </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>

</section>